<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Text ‚Üí PDF ‚Äî RDroid Apps</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="../../css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>

<body>
  <!-- RDroidApps Header -->
  <header>
    <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
    <div class="logo">
      <img src="../../assets/my_brand_icon.png" alt="RDroid" />
      <div>RDroid <span>Apps</span></div>
    </div>
    <div class="nav-links">
      <a href="../../index.html" class="active">Home</a>
      <a href="../../apps.html">Apps</a>
      <a href="../../about.html">About</a>
      <a href="../../contact.html">Contact</a>
      <a href="../../windows-tools.html">Windows Tools</a>
    </div>
    <a href="../../auth/login.html" class="login-btn">üîë Login</a>
  </header>

  <!-- ===== DRAWER (UNCHANGED) ===== -->
  <nav id="drawer">
    <a href="../../index.html">üè† Home</a>
    <a href="../../apps.html">üì± Apps</a>
    <a href="../../favorites.html">‚≠ê Favorites</a>
    <a href="../../profile.html">üë§ Profile</a>
    <a href="../../about.html">‚ÑπÔ∏è About</a>
    <a href="../../contact.html">‚úâÔ∏è Contact</a>
    <a href="../../privacy-policy.html">üîí Privacy Policy</a>
  </nav>
  <section class="section">

    <h1>Text ‚Üí PDF</h1>
    <p class="lead">Write or paste text and convert into a formatted PDF with custom page settings.</p>

    <textarea id="txt" placeholder="Enter your text here..."></textarea>

    <div class="controls">

      <div class="control">
        <label>Page size</label>
        <select id="pageSize">
          <option value="A4">A4</option>
          <option value="Letter">Letter</option>
        </select>
        <label style="margin-top:6px">Orientation</label>
        <select id="orientation">
          <option value="p">Portrait</option>
          <option value="l">Landscape</option>
        </select>
      </div>

      <div class="control">
        <label>Font size</label>
        <input type="number" id="fontSize" value="12">
        <label style="margin-top:6px">Line spacing</label>
        <input type="number" id="lineGap" value="6">
      </div>

      <div class="control">
        <label>Margins (mm)</label>
        <input type="number" id="margin" value="10">
        <label style="margin-top:6px">Header text</label>
        <input type="text" id="header">
        <label style="margin-top:6px">Footer text</label>
        <input type="text" id="footer">
      </div>

    </div>

    <div style="margin-top:12px">
      <button class="btn-primary" id="convertBtn">Create PDF</button>
    </div>

    <pre id="log" class="log">Ready.</pre>

    <div id="download"></div>

  </section>
  <footer>¬© 2025 RDroid Apps ‚Äî PDF Tools</footer>
  <script>
    // Drawer toggle
    function toggleMenu() {
      document.getElementById("drawer").classList.toggle("open");
    }
    const txt = document.getElementById("txt");
    const logEl = document.getElementById("log");
    const download = document.getElementById("download");

    function log(msg) { logEl.textContent += "\n" + msg; logEl.scrollTop = logEl.scrollHeight; }

    document.getElementById("convertBtn").onclick = async () => {
      const content = txt.value.trim();
      if (!content) { alert("Enter some text"); return; }

      log("Creating PDF...");
      const { jsPDF } = window.jspdf;

      const size = document.getElementById("pageSize").value === "A4" ? "a4" : "letter";
      const orient = document.getElementById("orientation").value === "p" ? "portrait" : "landscape";
      const margin = parseFloat(document.getElementById("margin").value) || 10;
      const fs = parseFloat(document.getElementById("fontSize").value) || 12;
      const gap = parseFloat(document.getElementById("lineGap").value) || 6;

      const header = document.getElementById("header").value;
      const footer = document.getElementById("footer").value;

      const pdf = new jsPDF({ unit: "mm", format: size, orientation: orient });
      pdf.setFontSize(fs);

      let y = margin;

      const lines = content.split("\n");

      for (let i = 0; i < lines.length; i++) {
        if (y === margin && header) { pdf.text(header, margin, y); y += fs + 3; }
        const wrapped = pdf.splitTextToSize(lines[i], pdf.internal.pageSize.getWidth() - margin * 2);
        wrapped.forEach(line => {
          if (y > pdf.internal.pageSize.getHeight() - margin) {
            if (footer) pdf.text(footer, margin, pdf.internal.pageSize.getHeight() - 6);
            pdf.addPage(); y = margin;
            if (header) { pdf.text(header, margin, y); y += fs + 3; }
          }
          pdf.text(line, margin, y);
          y += fs + gap;
        });
      }

      if (footer) pdf.text(footer, margin, pdf.internal.pageSize.getHeight() - 6);

      const blob = pdf.output("blob");
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "text.pdf";
      a.textContent = "Download PDF";
      a.className = "btn-primary";
      download.innerHTML = "";
      download.appendChild(a);
      log("Done.");
    };
  </script>

</body>

</html>
