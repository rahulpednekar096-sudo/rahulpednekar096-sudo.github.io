<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <title>Header Component</title>
</head>

<body>
    <!-- header.html -->
    <header>
        <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
        <a href="/index.html" class="tab-btn">üè† Home</a>
        <div class="logo">
            <img src="/assets/my_brand_icon.png" alt="RDroid" />
            <div>RDroid <span>Apps</span></div>
        </div>
        <section class="nav-links">
            <div class="tools-scroll">
                <a href="/apps.html" class="btn btn-ghost">Apps</a>
                <a href="/blog/index.html" class="btn tools">Blog section</a>
            </div>
        </section>

        <!-- Add Theme Toggle Button Here -->
        <button class="theme-btn" id="themeToggle" title="Toggle Theme">
            üåÑ
        </button>

        <a href="/auth/login.html" class="login-btn">üîë Login</a>
    </header>

    <!-- Add this small script to handle theme immediately -->
    <script>
        // Quick theme initialization - ALWAYS DARK FIRST for new tabs
        (function () {
            // Force dark theme immediately
            document.body.className = 'dark-theme';

            // Set button icon to moon (dark theme)
            const themeBtn = document.getElementById('themeToggle');
            if (themeBtn) {
                themeBtn.textContent = '‚òÄÔ∏è';
            }
        })();

        // ========================================
        // THEME MANAGEMENT SYSTEM (with sessionStorage)
        // ========================================
        function initThemeSystem() {
            const themeBtn = document.getElementById('themeToggle');
            const body = document.body;

            if (!themeBtn) return;

            // Check if we have a theme stored for this session (same tab)
            // If not, default to 'dark'
            let currentTheme = sessionStorage.getItem('theme') || 'dark';

            function applyTheme(theme) {
                // Update body class
                body.classList.remove('dark-theme', 'light-theme');
                body.classList.add(theme + '-theme');

                // Update button
                themeBtn.textContent = theme === 'light' ? 'üåÑ' : '‚òÄÔ∏è';
                themeBtn.title = theme === 'light' ? 'Switch to Dark Theme' : 'Switch to Light Theme';

                // Save to sessionStorage (per tab)
                sessionStorage.setItem('theme', theme);
            }

            // Apply the theme (either from session or default dark)
            applyTheme(currentTheme);

            // Toggle theme on button click
            themeBtn.addEventListener('click', function () {
                currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
                applyTheme(currentTheme);
            });

            // No storage event listener - we don't want cross-tab sync
            // No OS preference detection - we always start with dark
        }

        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initThemeSystem);
        } else {
            initThemeSystem();
        }
    </script>
</body>

</html>
